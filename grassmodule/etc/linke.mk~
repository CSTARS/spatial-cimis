#! /usr/bin/make -f

m:=1 2 3 4 5 6 7 8 9 10 11 12
prev:=12 1 2 3 4 5 6 7 8 9 10 11
next:=2 3 4 5 6 7 8 9 10 11 12 1
months:=jan feb mar apr may jun jul aug sep oct nov dec


${rast}/TL_$(word $1,${months}):
	g.region -d;
	r.proj location=WORLD

${rast}/tl_${1}15:${rast}/TL5_$(word $1,${months})
	g.region -d;
	r.mapcalc tl_${1}15=TL5_$(word $*,${months})/20;

${rast}/tl_${1}28:${rast}/tl_${1}15 ${rast}/tl_$(word $1,${next})
	g.region -d;
	r.mapcalc tl_$121=tl_${1}15*0.5+tl_$(word $1,${next})15*0.5

${rast}/tl_${1}21:${rast}/tl_${1}15 ${rast}/tl_$(word $1,${next})
	g.region -d;
	r.mapcalc tl_$121=tl_${1}15*0.75+tl_$(word $1,${next})15*0.25

${rast}/tl_${1}7:${rast}/tl_${1}15 ${rast}/tl_$(word $1,${prev})
	g.region -d;
	r.mapcalc tl_$121=tl_${1}15*0.75+tl_$(word $1,${prev})15*0.25
